(self.webpackChunkmps=self.webpackChunkmps||[]).push([[673],{5673:(at,Q,w)=>{"use strict";w.r(Q),w.d(Q,{MapModule:()=>Ve});var k=w(6895),H=w(4843),G=w(8407),n=(w(4930),w(4395),w(4650)),h=w(6319),l=w(4006),g=w(3336),u=w(4144),m=w(9549),f=w(4859);let x=(()=>{class r{constructor(t){this.data=t,this.formBuilder=(0,n.f3M)(l.j3),this.form=this.formBuilder.group({number:this.data.number,lat:this.data.lat,lng:this.data.lng,height:this.data.height})}get point(){return{number:this.data.number,lat:this.form.controls.lat.value,lng:this.form.controls.lng.value,height:this.form.controls.height.value}}}return r.\u0275fac=function(t){return new(t||r)(n.Y36(h.WI))},r.\u0275cmp=n.Xpm({type:r,selectors:[["app-point-dialog"]],decls:24,vars:3,consts:[["mat-dialog-content","",1,"content"],[3,"formGroup"],[1,"wrapper__marker"],[1,"marker"],["appearance","fill"],["formControlName","lat","matInput","","type","number","step","0.0001"],["formControlName","lng","matInput","","type","number","step","0.0001"],["formControlName","height","matInput","","type","number","step","1"],["mat-dialog-actions","",1,"actions"],["mat-icon-button","","mat-dialog-close","","cdkFocusInitial","","color","accent","aria-label","Close"],["mat-icon-button","","color","accent","aria-label","Save",3,"mat-dialog-close"]],template:function(t,i){1&t&&(n.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3),n._uU(4),n.qZA()(),n.TgZ(5,"mat-form-field",4)(6,"mat-label"),n._uU(7,"LAT"),n.qZA(),n._UZ(8,"input",5),n.qZA(),n.TgZ(9,"mat-form-field",4)(10,"mat-label"),n._uU(11,"LNG"),n.qZA(),n._UZ(12,"input",6),n.qZA(),n.TgZ(13,"mat-form-field",4)(14,"mat-label"),n._uU(15,"HEIGHT"),n.qZA(),n._UZ(16,"input",7),n.qZA()()(),n.TgZ(17,"div",8)(18,"button",9)(19,"mat-icon"),n._uU(20,"close"),n.qZA()(),n.TgZ(21,"button",10)(22,"mat-icon"),n._uU(23,"check"),n.qZA()()()),2&t&&(n.xp6(1),n.Q6J("formGroup",i.form),n.xp6(3),n.Oqu(i.point.number),n.xp6(17),n.Q6J("mat-dialog-close",i.point))},dependencies:[g.Hw,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,u.Nt,m.KE,m.hX,h.ZT,h.xY,h.H8,f.RK],styles:[".content[_ngcontent-%COMP%]{padding:8px 8px 0}.content[_ngcontent-%COMP%]   .wrapper__marker[_ngcontent-%COMP%]{padding-bottom:4px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.actions[_ngcontent-%COMP%]{position:relative;top:-12px;display:flex;justify-content:space-around}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transform:scale(.8)}"]}),r})();var v=w(1135),S=w(1273),b=w(3353),y=w(1281),T=w(1842),C=w(7579),O=w(727),F=w(4986),A=w(5963),ct=w(6406),dt=w(9751),I=w(6451),M=w(2722),E=w(8675),B=w(4004),N=w(5698),j=w(8505),J=w(3900),nt=w(445);function rt(r,e,t){for(let i in e)if(e.hasOwnProperty(i)){const o=e[i];o?r.setProperty(i,o,t?.has(i)?"important":""):r.removeProperty(i)}return r}function V(r,e){const t=e?"":"none";rt(r.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function lt(r,e,t){rt(r.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function K(r,e){return e&&"none"!=e?r+" "+e:r}function ht(r){const e=r.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(r)*e}function q(r,e){return r.getPropertyValue(e).split(",").map(i=>i.trim())}function X(r){const e=r.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function tt(r,e,t){const{top:i,bottom:o,left:s,right:d}=r;return t>=i&&t<=o&&e>=s&&e<=d}function Y(r,e,t){r.top+=e,r.bottom=r.top+r.height,r.left+=t,r.right=r.left+r.width}function Dt(r,e,t,i){const{top:o,right:s,bottom:d,left:p,width:_,height:D}=r,P=_*e,R=D*e;return i>o-R&&i<d+R&&t>p-P&&t<s+P}class Ct{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:X(t)})})}handleScroll(e){const t=(0,b.sA)(e),i=this.positions.get(t);if(!i)return null;const o=i.scrollPosition;let s,d;if(t===this._document){const D=this.getViewportScrollPosition();s=D.top,d=D.left}else s=t.scrollTop,d=t.scrollLeft;const p=o.top-s,_=o.left-d;return this.positions.forEach((D,P)=>{D.clientRect&&t!==P&&t.contains(P)&&Y(D.clientRect,p,_)}),o.top=s,o.left=d,{top:p,left:_}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function xt(r){const e=r.cloneNode(!0),t=e.querySelectorAll("[id]"),i=r.nodeName.toLowerCase();e.removeAttribute("id");for(let o=0;o<t.length;o++)t[o].removeAttribute("id");return"canvas"===i?St(r,e):("input"===i||"select"===i||"textarea"===i)&&Pt(r,e),Mt("canvas",r,e,St),Mt("input, textarea, select",r,e,Pt),e}function Mt(r,e,t,i){const o=e.querySelectorAll(r);if(o.length){const s=t.querySelectorAll(r);for(let d=0;d<o.length;d++)i(o[d],s[d])}}let Kt=0;function Pt(r,e){"file"!==e.type&&(e.value=r.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${Kt++}`)}function St(r,e){const t=e.getContext("2d");if(t)try{t.drawImage(r,0,0)}catch{}}const Tt=(0,b.i$)({passive:!0}),pt=(0,b.i$)({passive:!1}),_t=new Set(["position"]);class Xt{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=(0,y.Ig)(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(i=>V(i,t)))}constructor(e,t,i,o,s,d){this._config=t,this._document=i,this._ngZone=o,this._viewportRuler=s,this._dragDropRegistry=d,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new C.x,this._pointerMoveSubscription=O.w0.EMPTY,this._pointerUpSubscription=O.w0.EMPTY,this._scrollSubscription=O.w0.EMPTY,this._resizeSubscription=O.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new C.x,this.started=new C.x,this.released=new C.x,this.ended=new C.x,this.entered=new C.x,this.exited=new C.x,this.dropped=new C.x,this.moved=this._moveEvents,this._pointerDown=p=>{if(this.beforeStarted.next(),this._handles.length){const _=this._getTargetHandle(p);_&&!this._disabledHandles.has(_)&&!this.disabled&&this._initializeDragSequence(_,p)}else this.disabled||this._initializeDragSequence(this._rootElement,p)},this._pointerMove=p=>{const _=this._getPointerPositionOnPage(p);if(!this._hasStartedDragging){if(Math.abs(_.x-this._pickupPositionOnPage.x)+Math.abs(_.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const W=Date.now()>=this._dragStartTime+this._getDragStartDelay(p),$=this._dropContainer;if(!W)return void this._endDragSequence(p);(!$||!$.isDragging()&&!$.isReceiving())&&(p.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(p)))}return}p.preventDefault();const D=this._getConstrainedPointerPosition(_);if(this._hasMoved=!0,this._lastKnownPointerPosition=_,this._updatePointerDirectionDelta(D),this._dropContainer)this._updateActiveDropContainer(D,_);else{const P=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,R=this._activeTransform;R.x=D.x-P.x+this._passiveTransform.x,R.y=D.y-P.y+this._passiveTransform.y,this._applyRootElementTransform(R.x,R.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:D,event:p,distance:this._getDragDistance(D),delta:this._pointerDirectionDelta})})},this._pointerUp=p=>{this._endDragSequence(p)},this._nativeDragStart=p=>{if(this._handles.length){const _=this._getTargetHandle(p);_&&!this._disabledHandles.has(_)&&!this.disabled&&p.preventDefault()}else this.disabled||p.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new Ct(i),d.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(i=>(0,y.fI)(i)),this._handles.forEach(i=>V(i,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&t.add(i)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=(0,y.fI)(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,pt),t.addEventListener("touchstart",this._pointerDown,Tt),t.addEventListener("dragstart",this._nativeDragStart,pt)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?(0,y.fI)(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),V(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),V(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){ot(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const i=this._rootElement,o=i.parentNode,s=this._placeholder=this._createPlaceholderElement(),d=this._anchor=this._anchor||this._document.createComment(""),p=this._getShadowRoot();o.insertBefore(d,i),this._initialTransform=i.style.transform||"",this._preview=this._createPreviewElement(),lt(i,!1,_t),this._document.body.appendChild(o.replaceChild(s,i)),this._getPreviewInsertionPoint(o,p).appendChild(this._preview),this.started.next({source:this,event:e}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const i=this.isDragging(),o=ot(t),s=!o&&0!==t.button,d=this._rootElement,p=(0,b.sA)(t),_=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),D=o?(0,T.yG)(t):(0,T.X6)(t);if(p&&p.draggable&&"mousedown"===t.type&&t.preventDefault(),i||s||_||D)return;if(this._handles.length){const z=d.style;this._rootElementTapHighlight=z.webkitTapHighlightColor||"",z.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(z=>this._updateOnScroll(z)),this._boundaryElement&&(this._boundaryRect=X(this._boundaryElement));const P=this._previewTemplate;this._pickupPositionInElement=P&&P.template&&!P.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,e,t);const R=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:R.x,y:R.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){lt(this._rootElement,!0,_t),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,i=t.getItemIndex(this),o=this._getPointerPositionOnPage(e),s=this._getDragDistance(o),d=t._isOverContainer(o.x,o.y);this.ended.next({source:this,distance:s,dropPoint:o,event:e}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:d,distance:s,dropPoint:o,event:e}),t.drop(this,i,this._initialIndex,this._initialContainer,d,s,o,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:i,y:o}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,o),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,i=e?e.template:null;let o;if(i&&e){const s=e.matchSize?this._initialClientRect:null,d=e.viewContainer.createEmbeddedView(i,e.context);d.detectChanges(),o=Rt(d,this._document),this._previewRef=d,e.matchSize?kt(o,s):o.style.transform=ut(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else o=xt(this._rootElement),kt(o,this._initialClientRect),this._initialTransform&&(o.style.transform=this._initialTransform);return rt(o.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},_t),V(o,!1),o.classList.add("cdk-drag-preview"),o.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>o.classList.add(s)):o.classList.add(t)),o}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function ft(r){const e=getComputedStyle(r),t=q(e,"transition-property"),i=t.find(p=>"transform"===p||"all"===p);if(!i)return 0;const o=t.indexOf(i),s=q(e,"transition-duration"),d=q(e,"transition-delay");return ht(s[o])+ht(d[o])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{const o=d=>{(!d||(0,b.sA)(d)===this._preview&&"transform"===d.propertyName)&&(this._preview?.removeEventListener("transitionend",o),i(),clearTimeout(s))},s=setTimeout(o,1.5*t);this._preview.addEventListener("transitionend",o)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let i;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),i=Rt(this._placeholderRef,this._document)):i=xt(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(e,t,i){const o=t===this._rootElement?null:t,s=o?o.getBoundingClientRect():e,d=ot(i)?i.targetTouches[0]:i,p=this._getViewportScrollPosition();return{x:s.left-e.left+(d.pageX-s.left-p.left),y:s.top-e.top+(d.pageY-s.top-p.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),i=ot(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,o=i.pageX-t.left,s=i.pageY-t.top;if(this._ownerSVGElement){const d=this._ownerSVGElement.getScreenCTM();if(d){const p=this._ownerSVGElement.createSVGPoint();return p.x=o,p.y=s,p.matrixTransform(d.inverse())}}return{x:o,y:s}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:o}=this.constrainPosition?this.constrainPosition(e,this,this._initialClientRect,this._pickupPositionInElement):e;if("x"===this.lockAxis||"x"===t?o=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(i=this._pickupPositionOnPage.x),this._boundaryRect){const{x:s,y:d}=this._pickupPositionInElement,p=this._boundaryRect,{width:_,height:D}=this._getPreviewRect(),P=p.top+d,R=p.bottom-(D-d);i=It(i,p.left+s,p.right-(_-s)),o=It(o,P,R)}return{x:i,y:o}}_updatePointerDirectionDelta(e){const{x:t,y:i}=e,o=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,d=Math.abs(t-s.x),p=Math.abs(i-s.y);return d>this._config.pointerDirectionChangeThreshold&&(o.x=t>s.x?1:-1,s.x=t),p>this._config.pointerDirectionChangeThreshold&&(o.y=i>s.y?1:-1,s.y=i),o}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,V(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,pt),e.removeEventListener("touchstart",this._pointerDown,Tt),e.removeEventListener("dragstart",this._nativeDragStart,pt)}_applyRootElementTransform(e,t){const i=ut(e,t),o=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=o.transform&&"none"!=o.transform?o.transform:""),o.transform=K(i,this._initialTransform)}_applyPreviewTransform(e,t){const i=this._previewTemplate?.template?void 0:this._initialTransform,o=ut(e,t);this._preview.style.transform=K(o,i)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const i=this._rootElement.getBoundingClientRect(),o=this._boundaryElement.getBoundingClientRect();if(0===o.width&&0===o.height||0===i.width&&0===i.height)return;const s=o.left-i.left,d=i.right-o.right,p=o.top-i.top,_=i.bottom-o.bottom;o.width>i.width?(s>0&&(e+=s),d>0&&(e-=d)):e=0,o.height>i.height?(p>0&&(t+=p),_>0&&(t-=_)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:ot(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const i=(0,b.sA)(e);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&Y(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,b.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const i=this._previewContainer||"global";if("parent"===i)return e;if("global"===i){const o=this._document;return t||o.fullscreenElement||o.webkitFullscreenElement||o.mozFullScreenElement||o.msFullscreenElement||o.body}return(0,y.fI)(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function ut(r,e){return`translate3d(${Math.round(r)}px, ${Math.round(e)}px, 0)`}function It(r,e,t){return Math.max(e,Math.min(t,r))}function ot(r){return"t"===r.type[0]}function Rt(r,e){const t=r.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const i=e.createElement("div");return t.forEach(o=>i.appendChild(o)),i}function kt(r,e){r.style.width=`${e.width}px`,r.style.height=`${e.height}px`,r.style.transform=ut(e.left,e.top)}function Ot(r,e,t){const i=st(e,r.length-1),o=st(t,r.length-1);if(i===o)return;const s=r[i],d=o<i?-1:1;for(let p=i;p!==o;p+=d)r[p]=r[p+d];r[o]=s}function st(r,e){return Math.max(0,Math.min(e,r))}class te{constructor(e,t){this._element=e,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,t,i,o){const s=this._itemPositions,d=this._getItemIndexFromPointerPosition(e,t,i,o);if(-1===d&&s.length>0)return null;const p="horizontal"===this.orientation,_=s.findIndex(Z=>Z.drag===e),D=s[d],R=D.clientRect,z=_>d?1:-1,W=this._getItemOffsetPx(s[_].clientRect,R,z),$=this._getSiblingOffsetPx(_,s,z),et=s.slice();return Ot(s,_,d),s.forEach((Z,Ye)=>{if(et[Ye]===Z)return;const Qt=Z.drag===e,yt=Qt?W:$,Jt=Qt?e.getPlaceholderElement():Z.drag.getRootElement();Z.offset+=yt,p?(Jt.style.transform=K(`translate3d(${Math.round(Z.offset)}px, 0, 0)`,Z.initialTransform),Y(Z.clientRect,0,yt)):(Jt.style.transform=K(`translate3d(0, ${Math.round(Z.offset)}px, 0)`,Z.initialTransform),Y(Z.clientRect,yt,0))}),this._previousSwap.overlaps=tt(R,t,i),this._previousSwap.drag=D.drag,this._previousSwap.delta=p?o.x:o.y,{previousIndex:_,currentIndex:d}}enter(e,t,i,o){const s=null==o||o<0?this._getItemIndexFromPointerPosition(e,t,i):o,d=this._activeDraggables,p=d.indexOf(e),_=e.getPlaceholderElement();let D=d[s];if(D===e&&(D=d[s+1]),!D&&(null==s||-1===s||s<d.length-1)&&this._shouldEnterAsFirstChild(t,i)&&(D=d[0]),p>-1&&d.splice(p,1),D&&!this._dragDropRegistry.isDragging(D)){const P=D.getRootElement();P.parentElement.insertBefore(_,P),d.splice(s,0,e)}else(0,y.fI)(this._element).appendChild(_),d.push(e);_.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{const t=e.getRootElement();if(t){const i=this._itemPositions.find(o=>o.drag===e)?.initialTransform;t.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:i})=>{Y(i,e,t)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}_cacheItemPositions(){const e="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const i=t.getVisibleElement();return{drag:t,offset:0,initialTransform:i.style.transform||"",clientRect:X(i)}}).sort((t,i)=>e?t.clientRect.left-i.clientRect.left:t.clientRect.top-i.clientRect.top)}_getItemOffsetPx(e,t,i){const o="horizontal"===this.orientation;let s=o?t.left-e.left:t.top-e.top;return-1===i&&(s+=o?t.width-e.width:t.height-e.height),s}_getSiblingOffsetPx(e,t,i){const o="horizontal"===this.orientation,s=t[e].clientRect,d=t[e+-1*i];let p=s[o?"width":"height"]*i;if(d){const _=o?"left":"top",D=o?"right":"bottom";-1===i?p-=d.clientRect[_]-s[D]:p+=s[_]-d.clientRect[D]}return p}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,o="horizontal"===this.orientation;if(i[0].drag!==this._activeDraggables[0]){const d=i[i.length-1].clientRect;return o?e>=d.right:t>=d.bottom}{const d=i[0].clientRect;return o?e<=d.left:t<=d.top}}_getItemIndexFromPointerPosition(e,t,i,o){const s="horizontal"===this.orientation,d=this._itemPositions.findIndex(({drag:p,clientRect:_})=>p!==e&&((!o||p!==this._previousSwap.drag||!this._previousSwap.overlaps||(s?o.x:o.y)!==this._previousSwap.delta)&&(s?t>=Math.floor(_.left)&&t<Math.floor(_.right):i>=Math.floor(_.top)&&i<Math.floor(_.bottom))));return-1!==d&&this._sortPredicate(d,e)?d:-1}}const Lt=.05;class ee{constructor(e,t,i,o,s){this._dragDropRegistry=t,this._ngZone=o,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new C.x,this.entered=new C.x,this.exited=new C.x,this.dropped=new C.x,this.sorted=new C.x,this.receivingStarted=new C.x,this.receivingStopped=new C.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=O.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new C.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function it(r=0,e=F.z){return r<0&&(r=0),(0,A.H)(r,r,e)}(0,ct.Z).pipe((0,M.R)(this._stopScrollTimers)).subscribe(()=>{const d=this._scrollNode,p=this.autoScrollStep;1===this._verticalScrollDirection?d.scrollBy(0,-p):2===this._verticalScrollDirection&&d.scrollBy(0,p),1===this._horizontalScrollDirection?d.scrollBy(-p,0):2===this._horizontalScrollDirection&&d.scrollBy(p,0)})},this.element=(0,y.fI)(e),this._document=i,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new Ct(i),this._sortStrategy=new te(this.element,t),this._sortStrategy.withSortPredicate((d,p)=>this.sortPredicate(d,p,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,i,o){this._draggingStarted(),null==o&&this.sortingDisabled&&(o=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,i,o),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,i,o,s,d,p,_={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:i,container:this,previousContainer:o,isPointerOverContainer:s,distance:d,dropPoint:p,event:_})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(t.filter(o=>o.isDragging()).every(o=>-1===e.indexOf(o))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){const t=(0,y.fI)(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,i,o){if(this.sortingDisabled||!this._clientRect||!Dt(this._clientRect,.05,t,i))return;const s=this._sortStrategy.sort(e,t,i,o);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let i,o=0,s=0;if(this._parentPositions.positions.forEach((d,p)=>{p===this._document||!d.clientRect||i||Dt(d.clientRect,.05,e,t)&&([o,s]=function ie(r,e,t,i){const o=At(e,i),s=Ft(e,t);let d=0,p=0;if(o){const _=r.scrollTop;1===o?_>0&&(d=1):r.scrollHeight-_>r.clientHeight&&(d=2)}if(s){const _=r.scrollLeft;1===s?_>0&&(p=1):r.scrollWidth-_>r.clientWidth&&(p=2)}return[d,p]}(p,d.clientRect,e,t),(o||s)&&(i=p))}),!o&&!s){const{width:d,height:p}=this._viewportRuler.getViewportSize(),_={width:d,height:p,top:0,right:d,bottom:p,left:0};o=At(_,t),s=Ft(_,e),i=window}i&&(o!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=o,this._horizontalScrollDirection=s,this._scrollNode=i,(o||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=(0,y.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=(0,y.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;const e=(0,y.fI)(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,t){return null!=this._clientRect&&tt(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,i){return this._siblings.find(o=>o._canReceive(e,t,i))}_canReceive(e,t,i){if(!this._clientRect||!tt(this._clientRect,t,i)||!this.enterPredicate(e,this))return!1;const o=this._getShadowRoot().elementFromPoint(t,i);if(!o)return!1;const s=(0,y.fI)(this.element);return o===s||s.contains(o)}_startReceiving(e,t){const i=this._activeSiblings;!i.has(e)&&t.every(o=>this.enterPredicate(o,this)||this._draggables.indexOf(o)>-1)&&(i.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=(0,b.kV)((0,y.fI)(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function At(r,e){const{top:t,bottom:i,height:o}=r,s=o*Lt;return e>=t-s&&e<=t+s?1:e>=i-s&&e<=i+s?2:0}function Ft(r,e){const{left:t,right:i,width:o}=r,s=o*Lt;return e>=t-s&&e<=t+s?1:e>=i-s&&e<=i+s?2:0}const gt=(0,b.i$)({passive:!1,capture:!0});let ne=(()=>{class r{constructor(t,i){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=o=>o.isDragging(),this.pointerMove=new C.x,this.pointerUp=new C.x,this.scroll=new C.x,this._preventDefaultWhileDragging=o=>{this._activeDragInstances.length>0&&o.preventDefault()},this._persistentTouchmoveListener=o=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&o.preventDefault(),this.pointerMove.next(o))},this._document=i}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,gt)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,gt)}startDragging(t,i){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const o=i.type.startsWith("touch");this._globalListeners.set(o?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:gt}),o||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:gt}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,d)=>{this._document.addEventListener(d,s.handler,s.options)})})}}stopDragging(t){const i=this._activeDragInstances.indexOf(t);i>-1&&(this._activeDragInstances.splice(i,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const i=[this.scroll];return t&&t!==this._document&&i.push(new dt.y(o=>this._ngZone.runOutsideAngular(()=>{const d=p=>{this._activeDragInstances.length&&o.next(p)};return t.addEventListener("scroll",d,!0),()=>{t.removeEventListener("scroll",d,!0)}}))),(0,I.T)(...i)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,i)=>{this._document.removeEventListener(i,t.handler,t.options)}),this._globalListeners.clear()}}return r.\u0275fac=function(t){return new(t||r)(n.LFG(n.R0b),n.LFG(k.K0))},r.\u0275prov=n.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const re={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Gt=(()=>{class r{constructor(t,i,o,s){this._document=t,this._ngZone=i,this._viewportRuler=o,this._dragDropRegistry=s}createDrag(t,i=re){return new Xt(t,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new ee(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return r.\u0275fac=function(t){return new(t||r)(n.LFG(k.K0),n.LFG(n.R0b),n.LFG(S.rL),n.LFG(ne))},r.\u0275prov=n.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const vt=new n.OlP("CDK_DRAG_PARENT"),bt=new n.OlP("CdkDropListGroup"),Bt=new n.OlP("CDK_DRAG_CONFIG");let se=0;const zt=new n.OlP("CdkDropList");let Nt=(()=>{class r{get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=(0,y.Ig)(t)}constructor(t,i,o,s,d,p,_){this.element=t,this._changeDetectorRef=o,this._scrollDispatcher=s,this._dir=d,this._group=p,this._destroyed=new C.x,this.connectedTo=[],this.id="cdk-drop-list-"+se++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new n.vpe,this.entered=new n.vpe,this.exited=new n.vpe,this.sorted=new n.vpe,this._unsortedItems=new Set,this._dropListRef=i.createDropList(t),this._dropListRef.data=this,_&&this._assignDefaults(_),this._dropListRef.enterPredicate=(D,P)=>this.enterPredicate(D.data,P.data),this._dropListRef.sortPredicate=(D,P,R)=>this.sortPredicate(D,P.data,R.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),r._dropLists.push(this),p&&p._items.add(this)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,i)=>t._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const t=r._dropLists.indexOf(this);t>-1&&r._dropLists.splice(t,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(t){this._dir&&this._dir.change.pipe((0,E.O)(this._dir.value),(0,M.R)(this._destroyed)).subscribe(i=>t.withDirection(i)),t.beforeStarted.subscribe(()=>{const i=(0,y.Eq)(this.connectedTo).map(o=>"string"==typeof o?r._dropLists.find(d=>d.id===o):o);if(this._group&&this._group._items.forEach(o=>{-1===i.indexOf(o)&&i.push(o)}),!this._scrollableParentsResolved){const o=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(o),this._scrollableParentsResolved=!0}t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.sortingDisabled=(0,y.Ig)(this.sortingDisabled),t.autoScrollDisabled=(0,y.Ig)(this.autoScrollDisabled),t.autoScrollStep=(0,y.su)(this.autoScrollStep,2),t.connectedTo(i.filter(o=>o&&o!==this).map(o=>o._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),t.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),t.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),(0,I.T)(t.receivingStarted,t.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(t){const{lockAxis:i,draggingDisabled:o,sortingDisabled:s,listAutoScrollDisabled:d,listOrientation:p}=t;this.disabled=o??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=d??!1,this.orientation=p||"vertical",i&&(this.lockAxis=i)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=>t._dragRef))}}return r._dropLists=[],r.\u0275fac=function(t){return new(t||r)(n.Y36(n.SBq),n.Y36(Gt),n.Y36(n.sBO),n.Y36(S.mF),n.Y36(nt.Is,8),n.Y36(bt,12),n.Y36(Bt,8))},r.\u0275dir=n.lG2({type:r,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,i){2&t&&(n.uIk("id",i.id),n.ekj("cdk-drop-list-disabled",i.disabled)("cdk-drop-list-dragging",i._dropListRef.isDragging())("cdk-drop-list-receiving",i._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],standalone:!0,features:[n._Bn([{provide:bt,useValue:void 0},{provide:zt,useExisting:r}])]}),r})();const wt=new n.OlP("CdkDragHandle"),Zt=new n.OlP("CdkDragPlaceholder"),Ht=new n.OlP("CdkDragPreview");let Ut=(()=>{class r{get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=(0,y.Ig)(t),this._dragRef.disabled=this._disabled}constructor(t,i,o,s,d,p,_,D,P,R,z){this.element=t,this.dropContainer=i,this._ngZone=s,this._viewContainerRef=d,this._dir=_,this._changeDetectorRef=P,this._selfHandle=R,this._parentDrag=z,this._destroyed=new C.x,this.started=new n.vpe,this.released=new n.vpe,this.ended=new n.vpe,this.entered=new n.vpe,this.exited=new n.vpe,this.dropped=new n.vpe,this.moved=new dt.y(W=>{const $=this._dragRef.moved.pipe((0,B.U)(et=>({source:this,pointerPosition:et.pointerPosition,event:et.event,delta:et.delta,distance:et.distance}))).subscribe(W);return()=>{$.unsubscribe()}}),this._dragRef=D.createDrag(t,{dragStartThreshold:p&&null!=p.dragStartThreshold?p.dragStartThreshold:5,pointerDirectionChangeThreshold:p&&null!=p.pointerDirectionChangeThreshold?p.pointerDirectionChangeThreshold:5,zIndex:p?.zIndex}),this._dragRef.data=this,r._dragInstances.push(this),p&&this._assignDefaults(p),i&&(this._dragRef._withDropContainer(i._dropListRef),i.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,N.q)(1),(0,M.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const i=t.rootElementSelector,o=t.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),o&&!o.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=r._dragInstances.indexOf(this);t>-1&&r._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement;let i=t;this.rootElementSelector&&(i=void 0!==t.closest?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):(0,y.fI)(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const i=this._dir,o=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,d=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof o&&o?o:(0,y.su)(o),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(d).withPreviewContainer(this.previewContainer||"global"),i&&t.withDirection(i.value)}}),t.beforeStarted.pipe((0,N.q)(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let i=this.element.nativeElement.parentElement;for(;i;){if(i.classList.contains("cdk-drag")){t.withParent(r._dragInstances.find(o=>o.element.nativeElement===i)?._dragRef||null);break}i=i.parentElement}})}_handleEvents(t){t.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),t.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),t.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),t.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(t){const{lockAxis:i,dragStartDelay:o,constrainPosition:s,previewClass:d,boundaryElement:p,draggingDisabled:_,rootElementSelector:D,previewContainer:P}=t;this.disabled=_??!1,this.dragStartDelay=o||0,i&&(this.lockAxis=i),s&&(this.constrainPosition=s),d&&(this.previewClass=d),p&&(this.boundaryElement=p),D&&(this.rootElementSelector=D),P&&(this.previewContainer=P)}_setupHandlesListener(){this._handles.changes.pipe((0,E.O)(this._handles),(0,j.b)(t=>{const i=t.filter(o=>o._parentDrag===this).map(o=>o.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),(0,J.w)(t=>(0,I.T)(...t.map(i=>i._stateChanges.pipe((0,E.O)(i))))),(0,M.R)(this._destroyed)).subscribe(t=>{const i=this._dragRef,o=t.element.nativeElement;t.disabled?i.disableHandle(o):i.enableHandle(o)})}}return r._dragInstances=[],r.\u0275fac=function(t){return new(t||r)(n.Y36(n.SBq),n.Y36(zt,12),n.Y36(k.K0),n.Y36(n.R0b),n.Y36(n.s_b),n.Y36(Bt,8),n.Y36(nt.Is,8),n.Y36(Gt),n.Y36(n.sBO),n.Y36(wt,10),n.Y36(vt,12))},r.\u0275dir=n.lG2({type:r,selectors:[["","cdkDrag",""]],contentQueries:function(t,i,o){if(1&t&&(n.Suo(o,Ht,5),n.Suo(o,Zt,5),n.Suo(o,wt,5)),2&t){let s;n.iGM(s=n.CRH())&&(i._previewTemplate=s.first),n.iGM(s=n.CRH())&&(i._placeholderTemplate=s.first),n.iGM(s=n.CRH())&&(i._handles=s)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,i){2&t&&n.ekj("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[n._Bn([{provide:vt,useExisting:r}]),n.TTD]}),r})();var he=w(9646);let pe=(()=>{class r{constructor(){this.points=[{number:1,lat:50.486375,lng:30.469851,height:100},{number:2,lat:50.487071,lng:30.470656,height:100},{number:3,lat:50.486108,lng:30.472308,height:100},{number:4,lat:50.486508,lng:30.472308,height:100}]}getPoints(){return(0,he.of)(this.points)}postPoints(t){console.log(t)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=n.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var ue=w(5007),ge=w(7503),me=w(5380),jt=w(580),mt=w(3238);const fe=["*"],be=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],we=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"],ye=new n.OlP("MAT_CARD_CONFIG");let Vt=(()=>{class r{constructor(t){this.appearance=t?.appearance||"raised"}}return r.\u0275fac=function(t){return new(t||r)(n.Y36(ye,8))},r.\u0275cmp=n.Xpm({type:r,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(t,i){2&t&&n.ekj("mat-mdc-card-outlined","outlined"===i.appearance)("mdc-card--outlined","outlined"===i.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:fe,decls:1,vars:0,template:function(t,i){1&t&&(n.F$t(),n.Hsn(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mat-mdc-card{position:relative;border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px));background-color:var(--mdc-elevated-card-container-color, transparent);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color, transparent)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width, 1px);border-style:solid;border-color:var(--mdc-outlined-card-outline-color, transparent)}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),r})(),Yt=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=n.lG2({type:r,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]}),r})(),Wt=(()=>{class r{constructor(){this.align="start"}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=n.lG2({type:r,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(t,i){2&t&&n.ekj("mat-mdc-card-actions-align-end","end"===i.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),r})(),$t=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=n.Xpm({type:r,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],ngContentSelectors:we,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(t,i){1&t&&(n.F$t(be),n.Hsn(0),n.TgZ(1,"div",0),n.Hsn(2,1),n.qZA(),n.Hsn(3,2))},encapsulation:2,changeDetection:0}),r})(),Oe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[mt.BQ,k.ez,mt.BQ]}),r})();class Ee{constructor(e,t){this._document=t;const i=this._textarea=this._document.createElement("textarea"),o=i.style;o.position="fixed",o.top=o.opacity="0",o.left="-999em",i.setAttribute("aria-hidden","true"),i.value=e,i.readOnly=!0,this._document.body.appendChild(i)}copy(){const e=this._textarea;let t=!1;try{if(e){const i=this._document.activeElement;e.select(),e.setSelectionRange(0,e.value.length),t=this._document.execCommand("copy"),i&&i.focus()}}catch{}return t}destroy(){const e=this._textarea;e&&(e.remove(),this._textarea=void 0)}}let Le=(()=>{class r{constructor(t){this._document=t}copy(t){const i=this.beginCopy(t),o=i.copy();return i.destroy(),o}beginCopy(t){return new Ee(t,this._document)}}return r.\u0275fac=function(t){return new(t||r)(n.LFG(k.K0))},r.\u0275prov=n.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Ae=new n.OlP("CDK_COPY_TO_CLIPBOARD_CONFIG");let Fe=(()=>{class r{constructor(t,i,o){this._clipboard=t,this._ngZone=i,this.text="",this.attempts=1,this.copied=new n.vpe,this._pending=new Set,o&&null!=o.attempts&&(this.attempts=o.attempts)}copy(t=this.attempts){if(t>1){let i=t;const o=this._clipboard.beginCopy(this.text);this._pending.add(o);const s=()=>{const d=o.copy();d||!--i||this._destroyed?(this._currentTimeout=null,this._pending.delete(o),o.destroy(),this.copied.emit(d)):this._currentTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(s,1))};s()}else this.copied.emit(this._clipboard.copy(this.text))}ngOnDestroy(){this._currentTimeout&&clearTimeout(this._currentTimeout),this._pending.forEach(t=>t.destroy()),this._pending.clear(),this._destroyed=!0}}return r.\u0275fac=function(t){return new(t||r)(n.Y36(Le),n.Y36(n.R0b),n.Y36(Ae,8))},r.\u0275dir=n.lG2({type:r,selectors:[["","cdkCopyToClipboard",""]],hostBindings:function(t,i){1&t&&n.NdJ("click",function(){return i.copy()})},inputs:{text:["cdkCopyToClipboard","text"],attempts:["cdkCopyToClipboardAttempts","attempts"]},outputs:{copied:"cdkCopyToClipboardCopied"}}),r})(),Ge=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({}),r})();function Be(r,e){if(1&r){const t=n.EpF();n.TgZ(0,"li",6),n.NdJ("mousedown",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.mouseDown())})("mouseup",function(){n.CHM(t);const o=n.oxw();return n.KtG(o.mouseUp())}),n.TgZ(1,"mat-card",7)(2,"mat-card-header",8)(3,"mat-card-subtitle",9)(4,"div",10),n._uU(5),n.qZA(),n.TgZ(6,"span",11),n._uU(7),n.qZA(),n.TgZ(8,"span",11),n._uU(9),n.qZA(),n.TgZ(10,"span",11),n._uU(11),n.qZA()()(),n.TgZ(12,"mat-card-actions",12)(13,"button",13),n.ALo(14,"json"),n.TgZ(15,"mat-icon"),n._uU(16,"file_copy"),n.qZA()(),n.TgZ(17,"button",14),n.NdJ("click",function(){const s=n.CHM(t).$implicit,d=n.oxw();return n.KtG(d.openDialog(s))}),n.TgZ(18,"mat-icon"),n._uU(19,"edit"),n.qZA()(),n.TgZ(20,"button",15),n.NdJ("click",function(){const s=n.CHM(t).index,d=n.oxw();return n.KtG(d.deletePoint(s))}),n.TgZ(21,"mat-icon"),n._uU(22,"delete"),n.qZA()()()()()}if(2&r){const t=e.$implicit;n.xp6(5),n.Oqu(t.number),n.xp6(2),n.hij("LNG: ",t.lng,";"),n.xp6(2),n.hij("LAT: ",t.lat,";"),n.xp6(2),n.hij("HGT: ",t.height,";"),n.xp6(2),n.Q6J("cdkCopyToClipboard",n.lcZ(14,5,t))}}const ze=function(r,e,t){return{opened:r,closed:e,grabbing:t}},Ne=function(r){return{height:r}},Ze=[{path:"",component:(()=>{class r{constructor(t,i,o,s,d,p){this.zone=t,this.pointsService=i,this.dialog=o,this.orderPipe=s,this.incrementPipe=d,this.locationsPipe=p,this.isGrabbing=!1,this.isAsideOpened=!1,this.points$=new v.X([]),this.markers=[],this.leafletOptions={layers:[(0,G.tileLayer)("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:"..."})],zoom:17,center:(0,G.latLng)(50.4851493,30.4721233)}}get scrollHeight(){return`${document.body.scrollHeight}px`}ngOnInit(){this.pointsService.getPoints().pipe().subscribe(t=>{this.points$.next(t)})}onLeafletMapReady(t){this.map=t,this.points$.subscribe(i=>{this.generateScheme(i),this.pointsService.postPoints(i)})}addPoint(){const t={number:this.incrementPipe.transform(this.points$.getValue().length),lat:this.map.getCenter().lat,lng:this.map.getCenter().lng,height:0};this.points$.next([...this.points$.value,t])}deletePoint(t){const i=[...this.points$.value];i.splice(t,1);for(let o=t;o<i.length;o++)i[o].number=this.incrementPipe.transform(o);this.points$.next(i.sort((o,s)=>o.number-s.number))}drop(t){const i=this.points$.getValue();if(t.previousContainer===t.container)Ot(i,t.previousIndex,t.currentIndex);else{const o=i.splice(t.previousIndex,1)[0];i.splice(t.currentIndex,0,o)}this.points$.next(this.orderPipe.transform(i)),this.isGrabbing=!1}openDialog(t){this.zone.run(()=>{this.dialog.open(x,{data:t}).afterClosed().subscribe(o=>{if(o){const s=this.points$.value.slice();s.forEach(d=>{d.number===o.number&&(d.lat=o.lat,d.lng=o.lng,d.height=o.height)}),this.points$.next(s)}})})}toggleAside(){this.isAsideOpened=!this.isAsideOpened}mouseDown(){this.isGrabbing=!0}mouseUp(){this.isGrabbing=!1}generateScheme(t){this.eraseScheme(),this.drawScheme(t),this.listenScheme()}eraseScheme(){this.deleteAllPolylines(),this.deleteAllMarkers()}listenScheme(){for(const[t,i]of this.markers.entries())i.off("dragend").on("dragend",()=>this.onMarkerDragEnd(i,t)),i.off("dblclick").on("dblclick",()=>this.onMarkerDoubleClick(t))}onMarkerDragEnd(t,i){this.updatePointCoordinates(t.getLatLng(),i)}onMarkerDoubleClick(t){const i=this.points$.value.find(o=>o.number===this.incrementPipe.transform(t));i&&this.openDialog(i)}drawPolyline(t,i){const o=G.polyline(t,i);return o.arrowheads({yawn:13,fill:!0,offsets:{end:"10px"}}),o}drawMarker(t,i,o){const s=document.createElement("div");s.className="marker",s.innerText=String(t);const d=G.divIcon({html:s.outerHTML,className:"marker-icon"});return G.marker([i,o],{icon:d,draggable:!0})}deleteAllPolylines(){this.map.eachLayer(t=>{t instanceof G.Polyline&&t.remove()})}deleteAllMarkers(){this.markers=[],this.map.eachLayer(t=>{t instanceof G.Marker&&t.remove()})}updatePointCoordinates(t,i){const o=this.points$.value.find(p=>p.number===this.incrementPipe.transform(i));if(!o)return;const s={...o,lat:t.lat,lng:t.lng},d=this.points$.value.map(p=>p.number===this.incrementPipe.transform(i)?s:p);this.points$.next(d)}drawScheme(t){this.drawMarkers(t),this.drawPolylines(t)}drawPolylines(t){this.drawPolyline(this.locationsPipe.transform(t),{color:"red"}).addTo(this.map)}drawMarkers(t){this.markers=t.map(i=>this.drawMarker(i.number,i.lat,i.lng).addTo(this.map))}}return r.\u0275fac=function(t){return new(t||r)(n.Y36(n.R0b),n.Y36(pe),n.Y36(h.uw),n.Y36(ue.X),n.Y36(ge.Q),n.Y36(me.G))},r.\u0275cmp=n.Xpm({type:r,selectors:[["app-map"]],decls:13,vars:13,consts:[[1,"container",3,"ngClass"],["aria-label","Toggle","mat-mini-fab","","color","accent",1,"toggle",3,"click"],["aria-label","Add Point","mat-mini-fab","","color","accent",1,"add-point",3,"click"],["cdkDropList","",1,"points",3,"cdkDropListData","cdkDropListDropped"],["class","point","cdkDrag","","cdkDragLockAxis","y",3,"mousedown","mouseup",4,"ngFor","ngForOf"],["leaflet","",2,"width","100%",3,"leafletOptions","ngStyle","leafletMapReady"],["cdkDrag","","cdkDragLockAxis","y",1,"point",3,"mousedown","mouseup"],[1,"card"],[1,"header"],[1,"details"],[1,"marker"],[1,"data"],[1,"actions"],["mat-icon-button","","color","accent","aria-label","Copy to clipboard",3,"cdkCopyToClipboard"],["mat-icon-button","","color","accent","aria-label","Edit",3,"click"],["mat-icon-button","","color","accent","aria-label","Delete",3,"click"]],template:function(t,i){1&t&&(n.TgZ(0,"div",0)(1,"aside")(2,"button",1),n.NdJ("click",function(){return i.toggleAside()}),n.TgZ(3,"mat-icon"),n._uU(4,"menu"),n.qZA()(),n.TgZ(5,"button",2),n.NdJ("click",function(){return i.addPoint()}),n.TgZ(6,"mat-icon"),n._uU(7,"room"),n.qZA()(),n.TgZ(8,"ul",3),n.NdJ("cdkDropListDropped",function(s){return i.drop(s)}),n.YNc(9,Be,23,7,"li",4),n.ALo(10,"async"),n.qZA()(),n.TgZ(11,"main")(12,"div",5),n.NdJ("leafletMapReady",function(s){return i.onLeafletMapReady(s)}),n.qZA()()()),2&t&&(n.Q6J("ngClass",n.kEZ(7,ze,i.isAsideOpened,!i.isAsideOpened,i.isGrabbing)),n.xp6(8),n.Q6J("cdkDropListData",i.points$.getValue()),n.xp6(1),n.Q6J("ngForOf",n.lcZ(10,5,i.points$)),n.xp6(3),n.Q6J("leafletOptions",i.leafletOptions)("ngStyle",n.VKq(11,Ne,i.scrollHeight)))},dependencies:[k.mk,k.sg,k.PC,jt.je,f.RK,f.nh,g.Hw,Vt,Wt,$t,Yt,Fe,Nt,Ut,k.Ov,k.Ts],styles:[".container[_ngcontent-%COMP%]{display:grid}.container.closed[_ngcontent-%COMP%]{grid-template-columns:0 1fr}.container.closed[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%], .container.closed[_ngcontent-%COMP%]   .add-point[_ngcontent-%COMP%]{left:8px}.container.opened[_ngcontent-%COMP%]{grid-template-columns:215px 1fr}.container.opened[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%], .container.opened[_ngcontent-%COMP%]   .add-point[_ngcontent-%COMP%]{left:196px}.container.grabbing[_ngcontent-%COMP%]{cursor:grabbing}.container[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]{max-height:100vh;overflow:scroll;background-image:url(https://img.freepik.com/premium-vector/ukraine-camouflage-mm-14-pixel-seamless-military-pattern-texture-olive-colors-abstract-masking_653528-1434.jpg?w=1380);background-repeat:no-repeat;background-size:cover}.container[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]   .toggle[_ngcontent-%COMP%]{position:absolute;top:97px;z-index:888}.container[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]   .add-point[_ngcontent-%COMP%]{position:absolute;top:143px;z-index:888}.container[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]{overflow:scroll}.container[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]   .points.cdk-drop-list-dragging[_ngcontent-%COMP%]{cursor:grabbing}.container[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{margin:10px}.container[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{cursor:grab}.container[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]   .card.grabbing[_ngcontent-%COMP%]{cursor:grabbing}.container[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding:8px 8px 0}.container[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{font-size:12px}.container[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{justify-content:space-evenly}.container[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]   .points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transform:scale(.8)}.container[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;height:84px}.container[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   aside[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#fff}"]}),r})()}];let He=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[H.Bz.forChild(Ze),H.Bz]}),r})();w(7340);let je=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[k.ez,mt.BQ,S.ZD,S.ZD,mt.BQ]}),r})(),Ve=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({providers:[h.uw],imports:[k.ez,He,jt.UO,je,f.ot,g.Ps,Oe,h.Is,Ge,m.lN,u.c]}),r})()},4395:()=>{function at(c,a){return(c%a+a)%a}function Q(c){return Object.fromEntries(Object.entries(c).filter(([a,n])=>void 0!==n))}function w(c){return"m"===c.toString().trim().slice(c.toString().length-1,c.toString().length)}function k(c){return"%"===c.toString().trim().slice(c.toString().length-1,c.toString().length)}function H(c){return"px"===c.toString().trim().slice(c.toString().length-2,c.toString().length)}function G(c,a){let n=a.getCenter(),h=a.latLngToLayerPoint(n),l={x:h.x+Number(c),y:h.y},g=a.layerPointToLatLng(l);return a.distance(n,g)}L.Polyline.include({arrowheads:function(c={}){this.options.noClip=!0;let n=Object.assign({},{yawn:60,size:"15%",frequency:"allvertices",proportionalToTotal:!1},c);return this._arrowheadOptions=n,this._hatsApplied=!0,this},buildVectorHats:function(c){this._arrowheads&&this._arrowheads.remove(),this._ghosts&&this._ghosts.remove();let a=Object.getPrototypeOf(Object.getPrototypeOf(this.options)),n=Object.assign({},a,this.options),h=Object.assign({},n,c);h.smoothFactor=1,h.fillOpacity=1,h.fill=!!c.fill,h.interactive=!1;let l=c.size.toString(),g=[];const{frequency:u,offsets:m}=c;(m?.start||m?.end)&&this._buildGhosts({start:m.start,end:m.end}),(this._ghosts||this)._parts.forEach((v,S)=>{const b=v.map(I=>this._map.layerPointToLatLng(I)),y=(()=>{let I=0;for(var M=0;M<v.length-1;M++)I+=this._map.distance(b[M],b[M+1]);return I})();let T,C,O,F;if(isNaN(u)?k(u)?console.error("Error: arrowhead frequency option cannot be given in percent.  Try another unit."):w(u)?(O=u.slice(0,u.length-1)/y,F=1/O,F=Math.floor(F),O=1/F):H(u)&&(O=(()=>G(u.slice(0,u.length-2),this._map)/y)(),F=1/O,F=Math.floor(F),O=1/F):(O=1/u,F=u),"allvertices"===c.frequency)C=(()=>{let I=[];for(var M=1;M<b.length;M++){let E=L.GeometryUtil.angle(this._map,b[at(M-1,b.length)],b[M])+180;I.push(E)}return I})(),T=b,T.shift();else if("endonly"===c.frequency&&b.length>=2)T=[b[b.length-1]],C=[L.GeometryUtil.angle(this._map,b[b.length-2],b[b.length-1])+180];else{T=[];let I=[];for(var A=0;A<F;A++){let M=L.GeometryUtil.interpolateOnLine(this._map,b,O*(A+1));M&&(I.push(M),T.push(M.latLng))}C=(()=>{let M=[];for(var E=0;E<I.length;E++){let B=L.GeometryUtil.angle(this._map,b[I[E].predecessor+1],b[I[E].predecessor]);M.push(B)}return M})()}let it=[];const ct=(I,M={})=>{let E=M.yawn??c.yawn,B=L.GeometryUtil.destination(T[A],C[A]-E/2,I),N=L.GeometryUtil.destination(T[A],C[A]+E/2,I),j=[[B.lat,B.lng],[T[A].lat,T[A].lng],[N.lat,N.lng]],J=c.fill?L.polygon(j,{...h,...M}):L.polyline(j,{...h,...M});it.push(J)},dt=(I,M={})=>{let E=I.slice(0,I.length-2),B=M.yawn??c.yawn,N=this._map.latLngToLayerPoint(T[A]),j=C[A],J=(180-j-B/2)*(Math.PI/180),nt=(180-j+B/2)*(Math.PI/180),rt=E*Math.sin(J),V=E*Math.cos(J),lt=E*Math.sin(nt),K=E*Math.cos(nt),ft={x:N.x+lt,y:N.y+K},q=this._map.layerPointToLatLng({x:N.x+rt,y:N.y+V}),X=this._map.layerPointToLatLng(ft),tt=[[q.lat,q.lng],[T[A].lat,T[A].lng],[X.lat,X.lng]],Y=c.fill?L.polygon(tt,{...h,...M}):L.polyline(tt,{...h,...M});it.push(Y)};for(A=0;A<T.length;A++){let{perArrowheadOptions:M,...E}=c;if(M=M?M(A):{},M=Object.assign(E,Q(M)),l=M.size??l,w(l))ct(l.slice(0,l.length-1),M);else if(k(l)){let B=l.slice(0,l.length-1);ct("endonly"===c.frequency&&c.proportionalToTotal?y*B/100:y/(v.length-1)*B/100,M)}else H(l)?dt(c.size,M):console.error("Error: Arrowhead size unit not defined.  Check your arrowhead options.")}g.push(...it)});let x=L.layerGroup(g);return this._arrowheads=x,this},getArrowheads:function(){return this._arrowheads?this._arrowheads:console.error("Error: You tried to call '.getArrowheads() on a shape that does not have a arrowhead.  Use '.arrowheads()' to add a arrowheads before trying to call '.getArrowheads()'")},_buildGhosts:function({start:c,end:a}){if(c||a){let n=this.getLatLngs();n=Array.isArray(n[0])?n:[n];const h=n.map(l=>{const g=(()=>{let u=0;for(var m=0;m<l.length-1;m++)u+=this._map.distance(l[m],l[m+1]);return u})();if(c){let u=(()=>w(c)?Number(c.slice(0,c.length-1)):H(c)?G(Number(c.slice(0,c.length-2)),this._map):void 0)(),m=L.GeometryUtil.interpolateOnLine(this._map,l,u/g);(l=l.slice(-1===m.predecessor?1:m.predecessor+1,l.length)).unshift(m.latLng)}if(a){let u=(()=>w(a)?Number(a.slice(0,a.length-1)):H(a)?G(Number(a.slice(0,a.length-2)),this._map):void 0)(),m=L.GeometryUtil.interpolateOnLine(this._map,l,(g-u)/g);(l=l.slice(0,m.predecessor+1)).push(m.latLng)}return l});this._ghosts=L.polyline(h,{...this.options,color:"rgba(0,0,0,0)",stroke:0,smoothFactor:0,interactive:!1}),this._ghosts.addTo(this._map)}},deleteArrowheads:function(){this._arrowheads&&(this._arrowheads.remove(),delete this._arrowheads,delete this._arrowheadOptions,this._hatsApplied=!1),this._ghosts&&this._ghosts.remove()},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath(),this._hatsApplied&&(this.buildVectorHats(this._arrowheadOptions),this._map.addLayer(this._arrowheads)))},remove:function(){return this._arrowheads&&this._arrowheads.remove(),this._ghosts&&this._ghosts.remove(),this.removeFrom(this._map||this._mapToAdd)}}),L.LayerGroup.include({removeLayer:function(c){var a=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[a]&&(this._layers[a]._arrowheads&&this._layers[a]._arrowheads.remove(),this._map.removeLayer(this._layers[a])),delete this._layers[a],this},onRemove:function(c,a){for(var a in this._layers)this._layers[a]&&this._layers[a].remove();this.eachLayer(c.removeLayer,c)}}),L.Map.include({removeLayer:function(c){var a=L.Util.stamp(c);return c._arrowheads&&c._arrowheads.remove(),c._ghosts&&c._ghosts.remove(),this._layers[a]?(this._loaded&&c.onRemove(this),c.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(c.getAttribution()),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this}}),L.GeoJSON.include({geometryToLayer:function(c,a){var m,f,x,v,n="Feature"===c.type?c.geometry:c,h=n?n.coordinates:null,l=[],g=a&&a.pointToLayer,u=a&&a.coordsToLatLng||L.GeoJSON.coordsToLatLng;if(!h&&!n)return null;switch(n.type){case"Point":return m=u(h),this._pointToLayer(g,c,m,a);case"MultiPoint":for(x=0,v=h.length;x<v;x++)m=u(h[x]),l.push(this._pointToLayer(g,c,m,a));return new L.FeatureGroup(l);case"LineString":case"MultiLineString":f=L.GeoJSON.coordsToLatLngs(h,"LineString"===n.type?0:1,u);var S=new L.Polyline(f,a);return a.arrowheads&&S.arrowheads(a.arrowheads),S;case"Polygon":case"MultiPolygon":return f=L.GeoJSON.coordsToLatLngs(h,"Polygon"===n.type?1:2,u),new L.Polygon(f,a);case"GeometryCollection":for(x=0,v=n.geometries.length;x<v;x++){var b=this.geometryToLayer({geometry:n.geometries[x],type:"Feature",properties:c.properties},a);b&&l.push(b)}return new L.FeatureGroup(l);default:throw new Error("Invalid GeoJSON object.")}},addData:function(c){var n,h,l,a=L.Util.isArray(c)?c:c.features;if(a){for(n=0,h=a.length;n<h;n++)((l=a[n]).geometries||l.geometry||l.features||l.coordinates)&&this.addData(l);return this}var g=this.options;if(g.filter&&!g.filter(c))return this;var u=this.geometryToLayer(c,g);return u?(u.feature=L.GeoJSON.asFeature(c),u.defaultOptions=u.options,this.resetStyle(u),g.onEachFeature&&g.onEachFeature(c,u),this.addLayer(u)):this},_pointToLayer:function(c,a,n,h){return c?c(a,n):new L.Marker(n,h&&h.markersInheritOptions&&h)}})},4930:(at,Q,w)=>{var k,H,G;H=[w(8407)],void 0!==(G="function"==typeof(k=function(c){"use strict";return c.Polyline._flat=c.LineUtil.isFlat||c.Polyline._flat||function(a){return!c.Util.isArray(a[0])||"object"!=typeof a[0][0]&&typeof a[0][0]<"u"},c.GeometryUtil=c.extend(c.GeometryUtil||{},{distance:function(a,n,h){return a.latLngToLayerPoint(n).distanceTo(a.latLngToLayerPoint(h))},distanceSegment:function(a,n,h,l){var g=a.latLngToLayerPoint(n),u=a.latLngToLayerPoint(h),m=a.latLngToLayerPoint(l);return c.LineUtil.pointToSegmentDistance(g,u,m)},readableDistance:function(a,n){return"imperial"!==n?a>1e3?(a/1e3).toFixed(2)+" km":a.toFixed(1)+" m":(a*=1.09361)>1760?(a/1760).toFixed(2)+" miles":a.toFixed(1)+" yd"},belongsSegment:function(a,n,h,l){l=void 0===l?.2:l;var g=n.distanceTo(h);return(n.distanceTo(a)+a.distanceTo(h)-g)/g<l},length:function(a){var n=c.GeometryUtil.accumulatedLengths(a);return n.length>0?n[n.length-1]:0},accumulatedLengths:function(a){if("function"==typeof a.getLatLngs&&(a=a.getLatLngs()),0===a.length)return[];for(var n=0,h=[0],l=0,g=a.length-1;l<g;l++)n+=a[l].distanceTo(a[l+1]),h.push(n);return h},closestOnSegment:function(a,n,h,l){var g=a.getMaxZoom();g===1/0&&(g=a.getZoom());var u=a.project(n,g),m=a.project(h,g),f=a.project(l,g),x=c.LineUtil.closestPointOnSegment(u,m,f);return a.unproject(x,g)},closest:function(a,n,h,l){var g,f,x,v,S,u=1/0,m=null;if(n instanceof Array){if(n[0]instanceof Array&&"number"!=typeof n[0][0]){for(f=0;f<n.length;f++)(S=c.GeometryUtil.closest(a,n[f],h,l))&&S.distance<u&&(u=S.distance,m=S);return m}if(!(n[0]instanceof c.LatLng||"number"==typeof n[0][0]||"number"==typeof n[0].lat))return m;n=c.polyline(n)}if(!(n instanceof c.Polyline))return m;if(g=JSON.parse(JSON.stringify(n.getLatLngs().slice(0))),n instanceof c.Polygon){var b=function(O){if(c.Polyline._flat(O))O.push(O[0]);else for(var F=0;F<O.length;F++)b(O[F])};b(g)}if(c.Polyline._flat(g)){if(l){for(f=0,x=g.length;f<x;f++){var y=g[f];(v=c.GeometryUtil.distance(a,h,y))<u&&(u=v,(m=y).distance=v)}return m}for(f=0,x=g.length;f<x-1;f++){var T=g[f],C=g[f+1];(v=c.GeometryUtil.distanceSegment(a,h,T,C))<=u&&(u=v,(m=c.GeometryUtil.closestOnSegment(a,h,T,C)).distance=v)}return m}for(f=0;f<g.length;f++)(S=c.GeometryUtil.closest(a,g[f],h,l)).distance<u&&(u=S.distance,m=S);return m},closestLayer:function(a,n,h){for(var l=1/0,g=null,u=null,m=1/0,f=0,x=n.length;f<x;f++){var v=n[f];if(v instanceof c.LayerGroup){var S=c.GeometryUtil.closestLayer(a,v.getLayers(),h);S.distance<l&&(l=S.distance,g=S)}else"function"==typeof v.getLatLng?(u=v.getLatLng(),m=c.GeometryUtil.distance(a,h,u)):(u=c.GeometryUtil.closest(a,v,h))&&(m=u.distance),m<l&&(l=m,g={layer:v,latlng:u,distance:m})}return g},nClosestLayers:function(a,n,h,l){if((l="number"==typeof l?l:n.length)<1||n.length<1)return null;for(var u,m,g=[],f=0,x=n.length;f<x;f++){var v=n[f];if(v instanceof c.LayerGroup){var S=c.GeometryUtil.closestLayer(a,v.getLayers(),h);g.push(S)}else"function"==typeof v.getLatLng?(m=v.getLatLng(),u=c.GeometryUtil.distance(a,h,m)):(m=c.GeometryUtil.closest(a,v,h))&&(u=m.distance),g.push({layer:v,latlng:m,distance:u})}return g.sort(function(b,y){return b.distance-y.distance}),g.length>l?g.slice(0,l):g},layersWithin:function(a,n,h,l){l="number"==typeof l?l:1/0;for(var g=[],u=null,m=0,f=0,x=n.length;f<x;f++){var v=n[f];"function"==typeof v.getLatLng?(u=v.getLatLng(),m=c.GeometryUtil.distance(a,h,u)):(u=c.GeometryUtil.closest(a,v,h))&&(m=u.distance),u&&m<l&&g.push({layer:v,latlng:u,distance:m})}return g.sort(function(b,y){return b.distance-y.distance})},closestLayerSnap:function(a,n,h,l,g){l="number"==typeof l?l:1/0,g="boolean"!=typeof g||g;var u=c.GeometryUtil.closestLayer(a,n,h);if(!u||u.distance>l)return null;if(g&&"function"==typeof u.layer.getLatLngs){var m=c.GeometryUtil.closest(a,u.layer,u.latlng,!0);m.distance<l&&(u.latlng=m,u.distance=c.GeometryUtil.distance(a,m,h))}return u},interpolateOnPointSegment:function(a,n,h){return c.point(a.x*(1-h)+h*n.x,a.y*(1-h)+h*n.y)},interpolateOnLine:function(a,n,h){var l=(n=n instanceof c.Polyline?n.getLatLngs():n).length;if(l<2)return null;if(0===(h=Math.max(Math.min(h,1),0)))return{latLng:n[0]instanceof c.LatLng?n[0]:c.latLng(n[0]),predecessor:-1};if(1==h)return{latLng:n[n.length-1]instanceof c.LatLng?n[n.length-1]:c.latLng(n[n.length-1]),predecessor:n.length-2};var g=a.getMaxZoom();g===1/0&&(g=a.getZoom());for(var u=[],m=0,f=0;f<l;f++)u[f]=a.project(n[f],g),f>0&&(m+=u[f-1].distanceTo(u[f]));var x=m*h,v=0,S=0;for(f=0;S<x;f++)v=S,S+=(b=u[f]).distanceTo(y=u[f+1]);if(null==b&&null==y){var b=u[0],y=u[1];f=1}var C=c.GeometryUtil.interpolateOnPointSegment(b,y,S-v!=0?(x-v)/(S-v):0);return{latLng:a.unproject(C,g),predecessor:f-1}},locateOnLine:function(a,n,h){var l=n.getLatLngs();if(h.equals(l[0]))return 0;if(h.equals(l[l.length-1]))return 1;for(var g=c.GeometryUtil.closest(a,n,h,!1),u=c.GeometryUtil.accumulatedLengths(l),m=u[u.length-1],f=0,x=!1,v=0,S=l.length-1;v<S;v++){var b=l[v];if(f=u[v],c.GeometryUtil.belongsSegment(g,b,l[v+1],.001)){f+=b.distanceTo(g),x=!0;break}}if(!x)throw"Could not interpolate "+h.toString()+" within "+n.toString();return f/m},reverse:function(a){return c.polyline(a.getLatLngs().slice(0).reverse())},extract:function(a,n,h,l){if(h>l)return c.GeometryUtil.extract(a,c.GeometryUtil.reverse(n),1-h,1-l);h=Math.max(Math.min(h,1),0),l=Math.max(Math.min(l,1),0);var g=n.getLatLngs(),u=c.GeometryUtil.interpolateOnLine(a,n,h),m=c.GeometryUtil.interpolateOnLine(a,n,l);if(h==l)return[c.GeometryUtil.interpolateOnLine(a,n,l).latLng];-1==u.predecessor&&(u.predecessor=0),-1==m.predecessor&&(m.predecessor=0);var x=g.slice(u.predecessor+1,m.predecessor+1);return x.unshift(u.latLng),x.push(m.latLng),x},isBefore:function(a,n){if(!n)return!1;var h=a.getLatLngs(),l=n.getLatLngs();return h[h.length-1].equals(l[0])},isAfter:function(a,n){if(!n)return!1;var h=a.getLatLngs(),l=n.getLatLngs();return h[0].equals(l[l.length-1])},startsAtExtremity:function(a,n){if(!n)return!1;var h=a.getLatLngs(),l=n.getLatLngs(),g=h[0];return g.equals(l[0])||g.equals(l[l.length-1])},computeAngle:function(a,n){return 180*Math.atan2(n.y-a.y,n.x-a.x)/Math.PI},computeSlope:function(a,n){var h=(n.y-a.y)/(n.x-a.x);return{a:h,b:a.y-h*a.x}},rotatePoint:function(a,n,h,l){var g=a.getMaxZoom();g===1/0&&(g=a.getZoom());var u=h*Math.PI/180,m=a.project(n,g),f=a.project(l,g),x=Math.cos(u)*(m.x-f.x)-Math.sin(u)*(m.y-f.y)+f.x,v=Math.sin(u)*(m.x-f.x)+Math.cos(u)*(m.y-f.y)+f.y;return a.unproject(new c.Point(x,v),g)},bearing:function(a,n){var h=Math.PI/180,l=a.lat*h,g=n.lat*h,u=a.lng*h,m=n.lng*h,f=Math.sin(m-u)*Math.cos(g),x=Math.cos(l)*Math.sin(g)-Math.sin(l)*Math.cos(g)*Math.cos(m-u),v=(180*Math.atan2(f,x)/Math.PI+360)%360;return v>=180?v-360:v},destination:function(a,n,h){n=(n+360)%360;var l=Math.PI/180,g=180/Math.PI,u=6378137,m=a.lng*l,f=a.lat*l,x=n*l,v=Math.sin(f),S=Math.cos(f),b=Math.cos(h/u),y=Math.sin(h/u),T=Math.asin(v*b+S*y*Math.cos(x)),C=m+Math.atan2(Math.sin(x)*y*S,b-v*Math.sin(T));return c.latLng([T*g,C=(C*=g)>180?C-360:C<-180?C+360:C])},angle:function(a,n,h){var l=a.latLngToContainerPoint(n),g=a.latLngToContainerPoint(h),u=180*Math.atan2(g.y-l.y,g.x-l.x)/Math.PI+90;return u+(u<0?360:0)},destinationOnSegment:function(a,n,h,l){var g=c.GeometryUtil.angle(a,n,h),u=c.GeometryUtil.destination(n,g,l);return c.GeometryUtil.closestOnSegment(a,u,n,h)}}),c.GeometryUtil})?k.apply(Q,H):k)&&(at.exports=G)}}]);