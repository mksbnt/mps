<div [ngClass]="isAsideOpened ? 'opened' : 'closed'" class="container">
  <aside #aside>
    <button (click)="toggleAside()" aria-label="Toggle" class="toggle" color="accent"
            mat-mini-fab>
      <mat-icon>menu</mat-icon>
    </button>

    <button (click)="addPoint()" aria-label="Add Point" class="add-point" color="accent"
            mat-mini-fab>
      <mat-icon>room</mat-icon>
    </button>

    <ul class="points" cdkDropList [cdkDropListData]="points$.getValue()" (cdkDropListDropped)="drop($event)">
      <li *ngFor="let item of points$ | async; let i = index" class="point" cdkDrag>
        <mat-card>
          <mat-card-header class="header">
            <mat-card-subtitle class="details">
              <div class="marker">{{item.number}}</div>
              <span class="data">LNG: {{item.lng}};</span>
              <span class="data">LAT: {{item.lat}};</span>
              <span class="data">HGT: {{item.height}};</span>
            </mat-card-subtitle>
          </mat-card-header>
          <mat-card-actions class="actions">
            <button [cdkCopyToClipboard]="item | json" color="accent" mat-icon-button aria-label="Copy to clipboard">
              <mat-icon>file_copy</mat-icon>
            </button>

            <button (click)="openDialog(item)" color="accent" mat-icon-button aria-label="Edit">
              <mat-icon>edit</mat-icon>
            </button>

            <button (click)="deletePoint(i)" color="accent" mat-icon-button aria-label="Delete">
              <mat-icon>delete</mat-icon>
            </button>
          </mat-card-actions>
        </mat-card>
      </li>
    </ul>

  </aside>
  <main>
    <div
      (leafletMapReady)="onLeafletMapReady($event)"
      [leafletOptions]="leafletOptions"
      [ngStyle]="{'height': scrollHeight}"
      leaflet style="width: 100%">
    </div>
  </main>
</div>
